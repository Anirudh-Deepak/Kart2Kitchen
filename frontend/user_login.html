<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>User Login</title>
</head>
<body>
<h2>User Login</h2>
<form id="loginForm">
    Phone: <input type="text" id="phone" required><br><br>
    Password: <input type="password" id="password" required><br><br>
    <button type="submit">Login</button>
</form>
<p id="msg"></p>
<div id="vendorList"></div>
<script>
document.getElementById('loginForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    const phone = document.getElementById('phone').value;
    const password = document.getElementById('password').value;

    try {
        const res = await fetch('http://localhost:5000/user_login', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ phone, password })
        });
        const data = await res.json();
        if(res.status === 200){
            document.getElementById('msg').innerText = data.message;
            const vendors = data.vendors;
            if(vendors && vendors.length){
                let html = "<h3>Available Vendors:</h3><ul>";
                vendors.forEach(v => {
                    html += `<li>${v.name} - ${v.phone}</li>`;
                });
                html += "</ul>";
                document.getElementById('vendorList').innerHTML = html;
            }
        } else {
            document.getElementById('msg').innerText = data.error;
        }
    } catch(err) { console.error(err); }
});
</script>
</body>
</html>
